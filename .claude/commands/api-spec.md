# API 响应规范速查

本项目所有 HTTP 接口必须严格遵守以下规范。违反规范的代码不得合并。

---

## 1. 统一响应结构

所有接口（含健康检查）的响应体必须为以下 JSON 结构：

```json
{ "code": <int>, "msg": "<string>", "data": <any> }
```

| 字段 | 类型 | 说明 |
|------|------|------|
| `code` | int | 业务状态码，`0` 表示成功，非零表示失败 |
| `msg` | string | 人类可读描述，成功为 `"成功"`，失败为错误说明 |
| `data` | any/omit | 成功时携带返回数据；失败时、无数据时省略该字段 |

**唯一例外**：`GET /.well-known/jwks.json` 遵循 RFC 7517 标准，直接返回 JWK Set，不包装。

### 三种标准形态

```json
// 成功，有数据
{ "code": 0, "msg": "成功", "data": { "token": "xxx" } }

// 成功，无数据
{ "code": 0, "msg": "成功" }

// 失败
{ "code": 30002, "msg": "用户名或密码错误" }
```

---

**禁止**直接使用JSON工具转换，需要有统一的方法实现。

---

## 3. 错误码体系

错误码定义在常量块当中，并且支持扩展
---

## 4. 新增错误码流程

新增错误码必须检查错误吗定
## 5. 新增接口完整检查清单

新增或修改任何接口时，必须逐项确认：
- [ ] 使用了预定义错误码，没有硬编码数字
- [ ] 路由已在注册，并挂载了正确的中间件
- [ ] 接口文档已更新至 `API.md`
- [ ] 添加对应测试

---

