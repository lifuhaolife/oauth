version: '3.8'

services:
  auth-service:
    build: .
    container_name: auth_service
    environment:
      DB_HOST: ${DB_HOST:-localhost}
      DB_PORT: ${DB_PORT:-3306}
      DB_USER: ${DB_USER:-root}
      DB_PASSWORD: ${DB_PASSWORD:-your_password}
      DB_NAME: ${DB_NAME:-auth_service}
      SERVER_PORT: ${SERVER_PORT:-8080}
      SERVER_MODE: ${SERVER_MODE:-release}
      MASTER_KEY: ${MASTER_KEY:-}
      WECHAT_APP_ID: ${WECHAT_APP_ID:-}
      WECHAT_APP_SECRET: ${WECHAT_APP_SECRET:-}
    ports:
      - "${SERVER_PORT:-8080}:${SERVER_PORT:-8080}"
    volumes:
      - ./logs:/app/logs
      - ./keys:/app/keys
    restart: unless-stopped